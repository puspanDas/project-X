[{"filePath":"C:\\Users\\puspa\\Desktop\\location tracking\\frontend\\src\\App.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\puspa\\Desktop\\location tracking\\frontend\\src\\api.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\puspa\\Desktop\\location tracking\\frontend\\src\\components\\Navbar.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\puspa\\Desktop\\location tracking\\frontend\\src\\main.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\puspa\\Desktop\\location tracking\\frontend\\src\\pages\\AIInsightsPage.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":42,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":42,"endColumn":21}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useRef, useEffect } from 'react';\r\nimport { LuSparkles, LuSend, LuBot, LuUser } from 'react-icons/lu';\r\nimport { aiChat } from '../api';\r\n\r\nconst SUGGESTION_CHIPS = [\r\n    \"How to identify scam calls?\",\r\n    \"How to block unwanted numbers?\",\r\n    \"What is VoIP?\",\r\n    \"How to report spam?\",\r\n    \"Caller ID spoofing explained\",\r\n    \"Phone privacy tips\",\r\n    \"What are robocalls?\",\r\n    \"Is it safe to answer unknown numbers?\",\r\n];\r\n\r\nfunction AIInsightsPage() {\r\n    const [messages, setMessages] = useState([\r\n        {\r\n            role: 'ai',\r\n            text: \"üëã **Hello! I'm your Phone Safety AI Assistant.**\\n\\nI can help you with:\\n\\n‚Ä¢ üîç How to identify scam and spam calls\\n‚Ä¢ üõ°Ô∏è How to block unwanted numbers\\n‚Ä¢ üìã How and where to report fraud\\n‚Ä¢ üì° Understanding VoIP and virtual numbers\\n‚Ä¢ üé≠ Caller ID spoofing explained\\n‚Ä¢ üîí Phone privacy and data protection tips\\n\\nJust ask me anything about phone safety! üí¨\",\r\n        },\r\n    ]);\r\n    const [input, setInput] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n    const chatEndRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        chatEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n    }, [messages]);\r\n\r\n    const sendMessage = async (text) => {\r\n        if (!text.trim() || loading) return;\r\n\r\n        const userMsg = { role: 'user', text: text.trim() };\r\n        setMessages(prev => [...prev, userMsg]);\r\n        setInput('');\r\n        setLoading(true);\r\n\r\n        try {\r\n            const res = await aiChat(text.trim(), messages);\r\n            setMessages(prev => [...prev, { role: 'ai', text: res.response }]);\r\n        } catch (err) {\r\n            setMessages(prev => [...prev, { role: 'ai', text: \"‚ùå Sorry, something went wrong. Please try again.\" }]);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        sendMessage(input);\r\n    };\r\n\r\n    const handleChip = (text) => {\r\n        setInput(text);\r\n        sendMessage(text);\r\n    };\r\n\r\n    // Simple markdown-like formatting\r\n    const formatText = (text) => {\r\n        return text\r\n            .replace(/\\*\\*(.*?)\\*\\*/g, '<strong>$1</strong>')\r\n            .replace(/\\n/g, '<br />');\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            {/* Hero */}\r\n            <div className=\"ai-hero\">\r\n                <div className=\"ai-hero-icon\">\r\n                    <LuSparkles />\r\n                </div>\r\n                <h1 className=\"ai-hero-title\">AI Safety Assistant</h1>\r\n                <p className=\"ai-hero-subtitle\">\r\n                    Your intelligent companion for phone safety. Ask anything about scams,\r\n                    spam calls, privacy protection, and more.\r\n                </p>\r\n            </div>\r\n\r\n            {/* Chat Container */}\r\n            <div className=\"glass-card ai-chat-container\">\r\n                {/* Messages */}\r\n                <div className=\"ai-messages\">\r\n                    {messages.map((msg, i) => (\r\n                        <div key={i} className={`ai-message ${msg.role}`} style={{ animationDelay: `${i * 0.05}s` }}>\r\n                            <div className=\"ai-message-avatar\">\r\n                                {msg.role === 'ai' ? <LuBot /> : <LuUser />}\r\n                            </div>\r\n                            <div\r\n                                className=\"ai-message-bubble\"\r\n                                dangerouslySetInnerHTML={{ __html: formatText(msg.text) }}\r\n                            />\r\n                        </div>\r\n                    ))}\r\n                    {loading && (\r\n                        <div className=\"ai-message ai\">\r\n                            <div className=\"ai-message-avatar\"><LuBot /></div>\r\n                            <div className=\"ai-message-bubble\">\r\n                                <div className=\"ai-typing\">\r\n                                    <span></span><span></span><span></span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                    <div ref={chatEndRef} />\r\n                </div>\r\n\r\n                {/* Suggestion Chips */}\r\n                {messages.length <= 1 && (\r\n                    <div className=\"ai-chips\">\r\n                        {SUGGESTION_CHIPS.map(chip => (\r\n                            <button\r\n                                key={chip}\r\n                                className=\"ai-chip\"\r\n                                onClick={() => handleChip(chip)}\r\n                                disabled={loading}\r\n                            >\r\n                                {chip}\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n                )}\r\n\r\n                {/* Input */}\r\n                <form className=\"ai-input-bar\" onSubmit={handleSubmit}>\r\n                    <input\r\n                        type=\"text\"\r\n                        className=\"ai-input\"\r\n                        placeholder=\"Ask about phone safety...\"\r\n                        value={input}\r\n                        onChange={e => setInput(e.target.value)}\r\n                        disabled={loading}\r\n                    />\r\n                    <button className=\"ai-send-btn\" type=\"submit\" disabled={loading || !input.trim()}>\r\n                        <LuSend />\r\n                    </button>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default AIInsightsPage;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\puspa\\Desktop\\location tracking\\frontend\\src\\pages\\HistoryPage.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\puspa\\Desktop\\location tracking\\frontend\\src\\pages\\ReportPage.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\puspa\\Desktop\\location tracking\\frontend\\src\\pages\\ResultsPage.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":21,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":21}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useLocation, useNavigate, Link } from 'react-router-dom';\r\nimport { useState, useEffect } from 'react';\r\nimport { LuSearch, LuAlertTriangle, LuCheckCircle, LuSparkles } from 'react-icons/lu';\r\nimport { analyzeNumber } from '../api';\r\n\r\nfunction ResultsPage() {\r\n    const location = useLocation();\r\n    const navigate = useNavigate();\r\n    const result = location.state?.result;\r\n    const [aiResult, setAiResult] = useState(null);\r\n    const [aiLoading, setAiLoading] = useState(false);\r\n    const [aiError, setAiError] = useState('');\r\n\r\n    const handleAIAnalysis = async () => {\r\n        if (aiLoading || aiResult) return;\r\n        setAiLoading(true);\r\n        setAiError('');\r\n        try {\r\n            const analysis = await analyzeNumber(result);\r\n            setAiResult(analysis);\r\n        } catch (err) {\r\n            setAiError('Failed to run AI analysis. Is the backend running?');\r\n        } finally {\r\n            setAiLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        let themeClass = '';\r\n\r\n        if (aiResult) {\r\n            const risk = aiResult.risk_level?.toLowerCase() || '';\r\n            const score = aiResult.risk_score || 0;\r\n            if (risk === 'critical' || score >= 90) themeClass = 'theme-critical';\r\n            else if (risk === 'high' || score >= 70) themeClass = 'theme-danger';\r\n            else if (risk === 'medium' || score >= 40) themeClass = 'theme-warning';\r\n            else themeClass = 'theme-safe';\r\n        } else if (result) {\r\n            if (result.spam_reports > 5) themeClass = 'theme-danger';\r\n            else if (result.spam_reports > 0) themeClass = 'theme-warning';\r\n            else themeClass = 'theme-safe';\r\n        }\r\n\r\n        if (themeClass) document.body.className = themeClass;\r\n\r\n        return () => {\r\n            document.body.className = '';\r\n        };\r\n    }, [result, aiResult]);\r\n\r\n    if (!result) {\r\n        return (\r\n            <div className=\"empty-state\">\r\n                <div className=\"empty-icon\">üîç</div>\r\n                <p>No results to display. Go back and trace a number.</p>\r\n                <div className=\"actions\" style={{ marginTop: 20 }}>\r\n                    <button className=\"btn-outline\" onClick={() => navigate('/')}>\r\n                        <LuSearch /> Search a Number\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const getRiskColor = (level) => {\r\n        switch (level) {\r\n            case 'Critical': return '#ff4757';\r\n            case 'High': return '#ff6b6b';\r\n            case 'Medium': return '#ff9f43';\r\n            case 'Low': return '#00d4aa';\r\n            default: return '#8888a8';\r\n        }\r\n    };\r\n\r\n    const getRiskGradient = (score) => {\r\n        if (score >= 70) return 'linear-gradient(90deg, #ff4757, #ff6b6b)';\r\n        if (score >= 45) return 'linear-gradient(90deg, #ff6b6b, #ff9f43)';\r\n        if (score >= 25) return 'linear-gradient(90deg, #ff9f43, #ffd32a)';\r\n        return 'linear-gradient(90deg, #00d4aa, #6c63ff)';\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"glass-card\" style={{ animation: 'fadeIn 0.5s ease' }}>\r\n                {/* Flag & Number */}\r\n                <div className=\"result-flag\">{result.flag}</div>\r\n                <div className=\"result-number\">{result.formatted_international}</div>\r\n\r\n                {/* Validity */}\r\n                <div style={{ textAlign: 'center', marginBottom: 20 }}>\r\n                    {result.valid ? (\r\n                        <span className=\"validity-badge valid\">\r\n                            <LuCheckCircle /> Valid Number\r\n                        </span>\r\n                    ) : (\r\n                        <span className=\"validity-badge invalid\">\r\n                            <LuAlertTriangle /> Invalid / Not Active\r\n                        </span>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Info Grid */}\r\n                <div className=\"result-grid\">\r\n                    <div className=\"result-item\">\r\n                        <div className=\"label\">Country</div>\r\n                        <div className=\"value\">{result.flag} {result.country_name}</div>\r\n                    </div>\r\n                    <div className=\"result-item\">\r\n                        <div className=\"label\">Location</div>\r\n                        <div className=\"value\">{result.location || 'Unknown'}</div>\r\n                    </div>\r\n                    <div className=\"result-item\">\r\n                        <div className=\"label\">\r\n                            Carrier\r\n                            {result.carrier_source === 'live' && (\r\n                                <span style={{ marginLeft: 8, fontSize: '0.65rem', padding: '2px 8px', background: 'rgba(0,212,170,0.15)', color: 'var(--accent-secondary)', borderRadius: 100, fontWeight: 600 }}>LIVE</span>\r\n                            )}\r\n                            {result.carrier_source === 'offline' && (\r\n                                <span style={{ marginLeft: 8, fontSize: '0.65rem', padding: '2px 8px', background: 'rgba(255,159,67,0.15)', color: 'var(--accent-orange)', borderRadius: 100, fontWeight: 600 }}>OFFLINE</span>\r\n                            )}\r\n                        </div>\r\n                        <div className=\"value\">{result.carrier || 'Unknown'}</div>\r\n                        {result.original_carrier && result.original_carrier !== result.carrier && (\r\n                            <div style={{ fontSize: '0.75rem', color: 'var(--text-muted)', marginTop: 4 }}>\r\n                                Originally: {result.original_carrier}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                    <div className=\"result-item\">\r\n                        <div className=\"label\">Line Type</div>\r\n                        <div className=\"value\">{result.line_type || 'Unknown'}</div>\r\n                    </div>\r\n                    <div className=\"result-item\">\r\n                        <div className=\"label\">Format (E.164)</div>\r\n                        <div className=\"value\" style={{ fontSize: '0.95rem' }}>{result.e164}</div>\r\n                    </div>\r\n                    <div className=\"result-item\">\r\n                        <div className=\"label\">Timezone</div>\r\n                        <div className=\"value\" style={{ fontSize: '0.9rem' }}>\r\n                            {result.timezones?.length > 0 ? result.timezones.join(', ') : 'Unknown'}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Carrier accuracy note */}\r\n                {result.carrier_source === 'offline' && (\r\n                    <div style={{ fontSize: '0.75rem', color: 'var(--text-muted)', textAlign: 'center', marginTop: 12, fontStyle: 'italic' }}>\r\n                        ‚ìò Carrier shown is based on original number allocation. If ported (MNP), actual carrier may differ.\r\n                    </div>\r\n                )}\r\n\r\n                {/* Spam Reports */}\r\n                <div className={`spam-section ${result.spam_reports === 0 ? 'clean' : ''}`}>\r\n                    {result.spam_reports === 0 ? (\r\n                        <>\r\n                            <h3>üõ°Ô∏è Clean Number</h3>\r\n                            <p style={{ color: 'var(--text-secondary)', fontSize: '0.9rem' }}>\r\n                                No spam or scam reports from the community.\r\n                            </p>\r\n                        </>\r\n                    ) : (\r\n                        <>\r\n                            <h3>‚ö†Ô∏è {result.spam_reports} Spam Report{result.spam_reports > 1 ? 's' : ''}</h3>\r\n                            <div style={{ marginTop: 8 }}>\r\n                                {result.reports?.map((r, i) => (\r\n                                    <div key={i} style={{ marginBottom: 8 }}>\r\n                                        <span className=\"report-badge\">{r.type}</span>\r\n                                        {r.description && (\r\n                                            <span style={{ fontSize: '0.85rem', color: 'var(--text-secondary)', marginLeft: 8 }}>\r\n                                                {r.description}\r\n                                            </span>\r\n                                        )}\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </>\r\n                    )}\r\n                </div>\r\n\r\n                {/* === AI ANALYSIS SECTION === */}\r\n                {!aiResult && !aiLoading && (\r\n                    <div style={{ textAlign: 'center', marginTop: 24 }}>\r\n                        <button\r\n                            className=\"ai-analyze-btn\"\r\n                            onClick={handleAIAnalysis}\r\n                            disabled={aiLoading}\r\n                        >\r\n                            <LuSparkles style={{ fontSize: '1.2rem' }} />\r\n                            <span>Run AI Threat Analysis</span>\r\n                            <span className=\"ai-analyze-badge\">AI</span>\r\n                        </button>\r\n                    </div>\r\n                )}\r\n\r\n                {aiLoading && (\r\n                    <div className=\"ai-analysis-loading\">\r\n                        <div className=\"ai-pulse-ring\"></div>\r\n                        <p>Analyzing threat indicators...</p>\r\n                    </div>\r\n                )}\r\n\r\n                {aiError && (\r\n                    <div className=\"error-message\" style={{ marginTop: 20 }}>{aiError}</div>\r\n                )}\r\n\r\n                {aiResult && (\r\n                    <div className=\"ai-analysis-card\" style={{ animation: 'fadeIn 0.5s ease' }}>\r\n                        <div className=\"ai-analysis-header\">\r\n                            <LuSparkles style={{ color: 'var(--accent-primary)', fontSize: '1.3rem' }} />\r\n                            <span>AI Threat Analysis</span>\r\n                            <span className=\"ai-badge-glow\">AI</span>\r\n                            {aiResult.ai_source === 'llm' && (\r\n                                <span style={{\r\n                                    fontSize: '0.6rem', padding: '2px 8px',\r\n                                    background: 'rgba(0, 212, 170, 0.15)', color: '#00d4aa',\r\n                                    borderRadius: '100px', fontWeight: 700, letterSpacing: '0.5px',\r\n                                    border: '1px solid rgba(0, 212, 170, 0.2)',\r\n                                }}>LLM</span>\r\n                            )}\r\n                        </div>\r\n\r\n                        {/* Risk Meter */}\r\n                        <div className=\"ai-risk-meter\">\r\n                            <div className=\"ai-risk-labels\">\r\n                                <span>Risk Score</span>\r\n                                <span style={{ color: getRiskColor(aiResult.risk_level), fontWeight: 700, fontSize: '1.5rem' }}>\r\n                                    {aiResult.risk_score}\r\n                                    <span style={{ fontSize: '0.9rem', opacity: 0.7 }}>/100</span>\r\n                                </span>\r\n                            </div>\r\n                            <div className=\"ai-risk-bar-bg\">\r\n                                <div\r\n                                    className=\"ai-risk-bar-fill\"\r\n                                    style={{\r\n                                        width: `${aiResult.risk_score}%`,\r\n                                        background: getRiskGradient(aiResult.risk_score),\r\n                                    }}\r\n                                ></div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Risk Level & Threat Type */}\r\n                        <div style={{ display: 'flex', gap: 12, marginBottom: 16, flexWrap: 'wrap' }}>\r\n                            <span className=\"ai-risk-badge\" style={{ background: getRiskColor(aiResult.risk_level) + '22', color: getRiskColor(aiResult.risk_level), borderColor: getRiskColor(aiResult.risk_level) + '33' }}>\r\n                                {aiResult.risk_level} Risk\r\n                            </span>\r\n                            <span className=\"ai-threat-badge\">\r\n                                {aiResult.threat_type}\r\n                            </span>\r\n                        </div>\r\n\r\n                        {/* Analysis Text */}\r\n                        <div className=\"ai-analysis-text\">\r\n                            {aiResult.analysis}\r\n                        </div>\r\n\r\n                        {/* Factors */}\r\n                        {aiResult.factors && aiResult.factors.length > 0 && (\r\n                            <div className=\"ai-factors\">\r\n                                <div className=\"ai-factors-title\">Risk Factors</div>\r\n                                {aiResult.factors.map((f, i) => (\r\n                                    <div key={i} className=\"ai-factor-item\">\r\n                                        <span className=\"ai-factor-dot\"></span>\r\n                                        {f}\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        )}\r\n\r\n                        {/* Recommendation */}\r\n                        <div className=\"ai-recommendation\">\r\n                            {aiResult.recommendation}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Actions */}\r\n                <div className=\"actions\">\r\n                    <button className=\"btn-outline\" onClick={() => navigate('/')}>\r\n                        <LuSearch /> Search Another\r\n                    </button>\r\n                    <Link\r\n                        to=\"/report\"\r\n                        state={{ number: result.e164 }}\r\n                        className=\"btn-accent\"\r\n                    >\r\n                        <LuAlertTriangle /> Report This Number\r\n                    </Link>\r\n                </div>\r\n            </div>\r\n\r\n            <style>{`\r\n        @keyframes fadeIn {\r\n          from { opacity: 0; transform: translateY(20px); }\r\n          to { opacity: 1; transform: translateY(0); }\r\n        }\r\n      `}</style>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ResultsPage;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\puspa\\Desktop\\location tracking\\frontend\\src\\pages\\SearchPage.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]